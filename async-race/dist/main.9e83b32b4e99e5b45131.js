(()=>{"use strict";var e={774:(e,t,n)=>{n.r(t)},7:(e,t,n)=>{n.r(t)},272:(e,t,n)=>{n.r(t)},439:(e,t,n)=>{n.r(t)},266:(e,t,n)=>{n.r(t)},60:(e,t,n)=>{n.r(t)},604:(e,t,n)=>{n.r(t)},600:(e,t,n)=>{n.r(t)},528:(e,t,n)=>{n.r(t)},869:(e,t,n)=>{n.r(t)},57:(e,t,n)=>{n.r(t)},692:(e,t,n)=>{n.r(t)},593:(e,t,n)=>{n.r(t)},859:(e,t,n)=>{n.r(t)},148:(e,t,n)=>{n.r(t)},503:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[],n){this.element=document.createElement(e),this.element.classList.add(...t),void 0!==n&&this.element.append(`${n}`)}}},629:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;const r=n(583);n(774);class a extends r.BaseComponent{constructor(e,t,n="button",r=""){t.unshift("button"),super("button",t,e),this.element.setAttribute("type",n),this.element.setAttribute("id",r)}}t.Button=a},881:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Car=void 0;const r=n(704),a=n(129),s=n(891),i=n(328),o=n(583),l=n(629),d=n(181);n(7);class c extends o.BaseComponent{constructor(e,t,n){super("div",["car__wrapper"]),this.carMenagmentWrapper=new o.BaseComponent("div",["car__menagment"]),this.selectButton=new l.Button("select",["car__menagment-button","car__button-select"],"button",n),this.deleteButton=new l.Button("delete",["car__menagment-button","car__button-delete"],"button",n),this.carName=new o.BaseComponent("p",["car__name"],`${t}`),this.carControlAndRoadWrapper=new o.BaseComponent("div",["road__wrapper"]),this.carControllers=new o.BaseComponent("div",["car__controllers"]),this.startEngineButton=new l.Button("A",["engine__button","engine-start"]),this.stopEngineButton=new l.Button("B",["engine__button","engine-stop","disabled"]),this.stopEngineButton.element.setAttribute("disabled",""),this.road=new o.BaseComponent("div",["garage__road"]),this.car=new o.BaseComponent("div",["car"]),this.car.element.setAttribute("id",n),this.roadFlag=new o.BaseComponent("div",["flag"]),this.element.setAttribute("id",n),(()=>new Promise((t=>{this.renderCar(e),t()})))().then((()=>{this.addEventListeners()}))}renderCar(e){this.element.append(this.carMenagmentWrapper.element),this.carMenagmentWrapper.element.append(this.selectButton.element),this.carMenagmentWrapper.element.append(this.deleteButton.element),this.carMenagmentWrapper.element.append(this.carName.element),this.element.append(this.carControlAndRoadWrapper.element),this.carControlAndRoadWrapper.element.append(this.carControllers.element),this.carControllers.element.append(this.startEngineButton.element),this.carControllers.element.append(this.stopEngineButton.element),this.carControlAndRoadWrapper.element.append(this.road.element),(()=>{new d.CarSvg(`${e}`,this.car.element)})(),this.road.element.append(this.car.element),this.road.element.append(this.roadFlag.element)}clearCarsStyle(){document.querySelectorAll(`.${this.element.className}`).forEach((e=>{e.classList.remove("active")}))}setSelectedCarStyle(){this.clearCarsStyle(),this.element.classList.add("active")}setFormActiveStyle(){const e=document.querySelector(".selected-car__form");if(!e)throw Error(`Selected form not founded, ${this.element.className}`);for(let t=0;t<e.children.length;t++)e.children[t].removeAttribute("disabled"),e.children[t].classList.remove("disabled")}switchEngineButtonStatus(){this.startEngineButton.element.toggleAttribute("disabled"),this.startEngineButton.element.classList.toggle("disabled"),this.stopEngineButton.element.toggleAttribute("disabled"),this.stopEngineButton.element.classList.toggle("disabled")}addEventListeners(){this.selectButton.element.addEventListener("click",(()=>{localStorage.setItem("carID",this.element.id),this.setSelectedCarStyle(),this.setFormActiveStyle()})),this.deleteButton.element.addEventListener("click",(()=>{i.deleteCar(this.element.id).then((()=>{a.refreshGarage(),a.clearGarageSelectedForm()})).then((()=>i.deleteWinner(this.element.id))).then((()=>s.refreshWinners()))})),this.startEngineButton.element.addEventListener("click",(()=>{r.raceCar(this.element.id,this.car.element),this.switchEngineButtonStatus()})),this.stopEngineButton.element.addEventListener("click",(()=>{r.resetCar(this.element.id,this.car.element),this.switchEngineButtonStatus()}))}}t.Car=c},181:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarSvg=void 0,t.CarSvg=class{constructor(e,t){const n=`\n    <svg viewBox="0 0 512 512" width="100%" height="100%" fill="${e}">\n    <g id="_06-sport_car" data-name="06-sport car"><g id="glyph">\n    <path d="M416,228a44,44,0,1,0,44,44A44.049,44.049,0,0,0,416,228Zm0,64a20,20,\n    0,1,1,20-20A20.023,20.023,0,0,1,416,292Z"/><path d="M112,228a44,44,0,1,0,44,\n    44A44.049,44.049,0,0,0,112,228Zm0,64a20,20,0,1,1,20-20A20.023,20.023,0,0,1,112,292Z"/>\n    <path d="M506.4,250.009C505.127,247.8,474.607,196,416,196c-56.626,\n    0-86.215-12.689-90.065-14.46C319.378,177.257,273.36,148,240,148H144c-32.395,0-76.725,\n    27.588-85.268,33.107L12.205,196.616A12,12,0,0,0,4,208v64a12,12,0,0,0,9.646,11.767l46.48,9.3A56,\n    56,0,1,1,160.466,300H367.534a56,56,0,1,1,96.932,0H496a12,12,0,0,0,12-12V256A12.011,\n    12.011,0,0,0,506.4,250.009ZM240,268H192a12,12,0,0,1,0-24h48a12,12,\n    0,0,1,0,24Zm48,0a12,12,0,1,1,12-12A12,12,0,0,1,288,268Zm5.367-69.267A12.006,\n    12.006,0,0,1,288,200H192a12,12,0,0,1-3.795-.616C187.61,199.187,141.6,184,112,\n    184H73.937c17.944-10.044,47.022-24,70.063-24h96c25.8,0,59.178,17.5,76.007,\n    27.413ZM336,268a12,12,0,1,1,12-12A12,12,0,0,1,336,268Z"/></g></g></svg>\n    `;t.innerHTML=n}}},785:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Garage=void 0;const r=n(583),a=n(941),s=n(621);n(272);const i=n(268),o=n(493),l=n(664);class d extends r.BaseComponent{constructor(){super("div",["garage__main-wrapper"]);const e=()=>new Promise((e=>{o.getPageNumber(),e(o.getPageNumber())}));e().then((t=>{t||e();const n=new a.GarageHeader(l.carsList(),t);this.element.append(n.element);const r=new s.GarageField(l.carsList(),t);this.element.append(r.element);const o=new i.GarageFooter(l.carsList());this.element.append(o.element)}))}}t.Garage=d},621:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GarageField=void 0;const r=n(583),a=n(881);n(439);class s extends r.BaseComponent{constructor(e,t){super("div",["garage__field"]);const n=7*t;for(let t=n-7;t<e.length&&t<n;t++){const{color:n}=e[t],{name:r}=e[t],{id:s}=e[t],i=new a.Car(n,r,s);this.element.append(i.element)}}}t.GarageField=s},268:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GarageFooter=void 0;const r=n(493),a=n(129),s=n(583),i=n(629);n(266);class o extends s.BaseComponent{constructor(e){super("div",["garage__footer"]);const t=Math.ceil(e.length/7);localStorage.setItem("garage-pages",`${t}`),(()=>new Promise((e=>{const t=r.setNextGarageButtonSettings(),n=r.setPrevGarageButtonSettings();this.renderGarageFooter(n,t),e()})))().then((()=>{this.addEventListeners()})).catch((e=>{throw Error(e)}))}addEventListeners(){this.prevPage.element.addEventListener("click",(()=>{this.prevPage.element.classList.contains("disabled")||(r.setPageNumber(-1),a.renderNewGarage(),a.clearGarageSelectedForm())})),this.nextPage.element.addEventListener("click",(()=>{this.nextPage.element.classList.contains("disabled")||(r.setPageNumber(1),a.renderNewGarage(),a.clearGarageSelectedForm())}))}renderGarageFooter(e,t){this.prevPage=new i.Button("Prev page",["garage__button",e]),this.nextPage=new i.Button("Next page",["garage__button",t]),this.element.append(this.prevPage.element),this.element.append(this.nextPage.element)}}t.GarageFooter=o},941:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GarageHeader=void 0;const r=n(704),a=n(583),s=n(629);n(60);class i extends a.BaseComponent{constructor(e,t){super("div",["garage__header"]),(()=>new Promise((n=>{this.renderGarageHeader(e.length,t),n()})))().then((()=>{this.addEventListeners()}))}renderGarageHeader(e,t){this.garageInfo=new a.BaseComponent("div",["garage__info"]),this.element.append(this.garageInfo.element),this.countOfCar=new a.BaseComponent("p",["info__cars-count"],`Cars in garage (${e})`),this.garageInfo.element.append(this.countOfCar.element),this.pageNumber=new a.BaseComponent("p",["info__page-number"],`Page #${t}`),this.garageInfo.element.append(this.pageNumber.element),this.startButton=new s.Button("race",["garage__button"],"button","race"),this.element.append(this.startButton.element),this.resetButton=new s.Button("reset",["garage__button","disabled"],"button","reset"),this.resetButton.element.setAttribute("disabled","disabled"),this.element.append(this.resetButton.element)}addEventListeners(){this.startButton.element.addEventListener("click",(()=>{r.raceAllCars()})),this.resetButton.element.addEventListener("click",(()=>{r.resetAllCars()}))}}t.GarageHeader=i},807:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GarageMenu=void 0;const r=n(796),a=n(129),s=n(891),i=n(328),o=n(583),l=n(629),d=n(887);n(604);class c extends o.BaseComponent{constructor(){super("div",["garage__menu"]),this.newCarForm=new o.BaseComponent("form",["new-car__form"]),this.inputNewCarName=new d.Input(["garage__menu-input","new-car-name__input"],"Enter model");let e=localStorage.getItem("inputNameValue");e||(e=""),this.inputNewCarName.element.value=e,this.inputNewCarColor=new d.Input(["garage__menu-input","new-car-color__input"],"","color");let t=localStorage.getItem("inputColorValue");t||(t="#000000"),this.inputNewCarColor.element.value=t,this.submitButtonNewCar=new l.Button("Add new Car",["garage__menu-button","new-car__bitton"],"submit"),this.selectedCarForm=new o.BaseComponent("form",["selected-car__form"]),this.inputChangeCarName=new d.Input(["garage__menu-input","selected-car__input"],"Enter model"),this.inputChangeCarName.element.setAttribute("disabled","disabled"),this.inputChangeCarColor=new d.Input(["garage__menu-input","selected-car-color__input"],"","color"),this.inputChangeCarColor.element.setAttribute("disabled","disabled"),this.submitButtonSelectedCar=new l.Button("Change Car",["garage__menu-button","change-car__bitton","disabled"],"submit"),this.submitButtonSelectedCar.element.setAttribute("disabled","disabled"),this.generateCarsButton=new l.Button("generate cars",["garage__menu-button","generate-car__bitton"]),this.carName=this.inputNewCarName.element,this.carColor=this.inputNewCarColor.element,this.countOfNewCars=0,this.updateNameOfCar=this.inputChangeCarName.element,this.updateColorOfCar=this.inputChangeCarColor.element,(()=>{new Promise((e=>{this.renderGarageMenu(),e()})).then((()=>{this.addEventListeners()}))})()}renderGarageMenu(){this.element.append(this.newCarForm.element),this.newCarForm.element.append(this.inputNewCarName.element),this.newCarForm.element.append(this.inputNewCarColor.element),this.newCarForm.element.append(this.submitButtonNewCar.element),this.element.append(this.selectedCarForm.element),this.selectedCarForm.element.append(this.inputChangeCarName.element),this.selectedCarForm.element.append(this.inputChangeCarColor.element),this.selectedCarForm.element.append(this.submitButtonSelectedCar.element),this.element.append(this.generateCarsButton.element)}clearForm(e){if("newCar"===e&&(this.carName.value="",this.carColor.value="#000000",localStorage.setItem("inputNameValue",""),localStorage.setItem("inputColorValue","#000000")),"selectedCar"===e){this.updateNameOfCar.value="",this.updateColorOfCar.value="#000000";const e=document.querySelector(".selected-car__form");if(!e)throw Error("Selected form not founded");for(let t=0;t<e.children.length;t++)e.children[t].setAttribute("disabled","");e.children[2].classList.add("disabled")}}addNewCar(){const e={name:this.carName.value,color:this.carColor.value};i.createCar(e).then((()=>{a.refreshGarage(),this.clearForm("newCar")}))}updateSelectedCar(){const e=localStorage.getItem("carID");if(!e)throw Error("CarID not founded");const t={name:this.updateNameOfCar.value,color:this.updateColorOfCar.value,id:e};i.updateCar(t).then((()=>{a.refreshGarage().then((()=>{this.clearForm("selectedCar"),s.refreshWinners()}))}))}addRandomCars(){this.countOfNewCars=100;for(let e=0;e<this.countOfNewCars;e++)i.createCar(r.randomCar());a.refreshGarage()}addEventListeners(){this.inputNewCarName.element.addEventListener("input",(()=>{const e=this.inputNewCarName.element.value;localStorage.setItem("inputNameValue",e)})),this.inputNewCarColor.element.addEventListener("input",(()=>{const e=this.inputNewCarColor.element.value;localStorage.setItem("inputColorValue",e)})),this.submitButtonNewCar.element.addEventListener("click",(e=>{""!==this.carName.value&&(e.preventDefault(),this.addNewCar())})),this.generateCarsButton.element.addEventListener("click",(()=>{this.addRandomCars()})),this.submitButtonSelectedCar.element.addEventListener("click",(e=>{""!==this.updateNameOfCar.value&&(e.preventDefault(),this.updateSelectedCar())}))}}t.GarageMenu=c},335:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GarageMessage=void 0;const r=n(583);n(600);class a extends r.BaseComponent{constructor(e=""){super("div",["garage__message"]),this.message=new r.BaseComponent("p",["garage__message-text"],e),this.element.append(this.message.element)}show(){this.message.element.style.display="flex"}hide(){this.message.element.style.display="hidden"}}t.GarageMessage=a},977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const r=n(583),a=n(629);n(528);class s extends r.BaseComponent{constructor(){super("header",["header"]);const e=new r.BaseComponent("nav",["header_nav"]);this.garageButton=new a.Button("Garage",["header__button"]),this.winnersButton=new a.Button("Winners",["header__button"]),new Promise((t=>{this.element.append(e.element),e.element.append(this.garageButton.element),e.element.append(this.winnersButton.element),t()})).then((()=>{this.listenersAdd()}))}listenersAdd(){this.garageButton.element.addEventListener("click",(()=>{const e=document.querySelector(".main-garage"),t=document.querySelectorAll(".car__wrapper");null==e||e.classList.remove("main-hidden"),t.forEach((e=>e.classList.remove("car__wrapper-hidden")))})),this.winnersButton.element.addEventListener("click",(()=>{const e=document.querySelector(".main-garage"),t=document.querySelectorAll(".car__wrapper");null==e||e.classList.add("main-hidden"),t.forEach((e=>e.classList.add("car__wrapper-hidden")))}))}}t.Header=s},887:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0;const r=n(583);n(869);class a extends r.BaseComponent{constructor(e=[],t="",n="text"){super("input",e),this.element.setAttribute("placeholder",t),this.element.setAttribute("type",n),this.element.setAttribute("required","required")}}t.Input=a},743:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0;const r=n(583),a=n(785),s=n(807),i=n(335),o=n(423),l=n(88),d=n(345),c=n(681);n(57);class u extends r.BaseComponent{constructor(e){super("main",["main"]),this.mainWrapper=new r.BaseComponent("div",["main__wrapper"]),this.element.append(this.mainWrapper.element),this.garageMenuAndMessageWrapper=new r.BaseComponent("div",["garage__top-wrapper"]),this.garageMenu=new s.GarageMenu,this.garageMessage=new i.GarageMessage(" "),this.garage=new a.Garage,this.winnersTitle=new c.WinnersTop,this.winnersMain=new r.BaseComponent("div",["winners__main"]),this.winnersFieldHeader=new l.WinnersFieldHeader,this.winnersField=new o.WinnersField,this.winnersFooter=new d.WinnersFooter,"garage"===e&&this.renderGarageView(),"winners"===e&&this.renderWinnersView()}renderGarageView(){this.element.classList.add("main-garage"),this.mainWrapper.element.append(this.garageMenuAndMessageWrapper.element),this.garageMenuAndMessageWrapper.element.append(this.garageMenu.element),this.garageMenuAndMessageWrapper.element.append(this.garageMessage.element),this.mainWrapper.element.append(this.garage.element)}renderWinnersView(){this.element.classList.add("main-winners"),this.mainWrapper.element.append(this.winnersTitle.element),this.mainWrapper.element.append(this.winnersMain.element),this.winnersMain.element.append(this.winnersFieldHeader.element),this.winnersMain.element.append(this.winnersField.element),this.winnersMain.element.append(this.winnersFooter.element)}renderNewGarage(){const e=this.garage.element,t=new a.Garage;e.replaceWith(t.element)}}t.Main=u},423:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersField=void 0;const r=n(664),a=n(955),s=n(583),i=n(181);n(692);class o extends s.BaseComponent{constructor(){super("div",["winners-field"]);const e=r.carsList(),t=r.winnersList(),n=10*a.getWinnersPageNumber();for(let a=n-10;a<r.winnersList().length&&a<n;a++){const n=e.filter((e=>+e.id==+t[a].id)),r=new s.BaseComponent("div",["winner__info"]);this.element.append(r.element);const o=new s.BaseComponent("p",["winner__info-number"],`${a+1}`);r.element.append(o.element);const l=new s.BaseComponent("div",["winner__info-car"]);new i.CarSvg(`${n[0].color}`,l.element),r.element.append(l.element);const d=new s.BaseComponent("p",["winner__info-name"],`${n[0].name}`);r.element.append(d.element);const c=new s.BaseComponent("p",["winner__info-wins"],`${t[a].wins}`);r.element.append(c.element);const u=new s.BaseComponent("p",["winner__info-best-time"],`${(+t[a].time).toFixed(2)}s`);r.element.append(u.element)}}}t.WinnersField=o},88:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersFieldHeader=void 0;const r=n(891),a=n(583);n(593);class s extends a.BaseComponent{constructor(){super("div",["field__header"]),this.columnNumber=new a.BaseComponent("p",["field__header-title"],"Number"),this.columnCar=new a.BaseComponent("p",["field__header-title"],"Car"),this.columnName=new a.BaseComponent("p",["field__header-title"],"Name"),this.columnWins=new a.BaseComponent("p",["field__header-title","field__title-button"],"Wins"),this.columnBestTime=new a.BaseComponent("p",["field__header-title","field__title-button"],"Best time (seconds)"),(()=>new Promise((e=>{this.renderWinnersFieldHeader(),e()})))().then((()=>{this.addEventListeners()}))}renderWinnersFieldHeader(){this.element.append(this.columnNumber.element),this.element.append(this.columnCar.element),this.element.append(this.columnName.element),this.element.append(this.columnWins.element),this.element.append(this.columnBestTime.element)}sort(e){this.currentSort=localStorage.getItem("sort");const t=localStorage.getItem("order");this.currentSort!==e?(localStorage.setItem("sort",e),localStorage.setItem("order","DESC")):"ASC"===t?localStorage.setItem("order","DESC"):localStorage.setItem("order","ASC")}addEventListeners(){this.columnWins.element.addEventListener("click",(()=>{this.sort("wins"),r.refreshWinners()})),this.columnBestTime.element.addEventListener("click",(()=>{this.sort("time"),r.refreshWinners()}))}}t.WinnersFieldHeader=s},345:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersFooter=void 0;const r=n(664),a=n(891),s=n(955),i=n(583),o=n(629);n(859);class l extends i.BaseComponent{constructor(){super("div",["winners__footer"]);const e=Math.ceil(r.winnersList().length/10);localStorage.setItem("winners-pages",`${e}`),(()=>new Promise((e=>{const t=s.setNextWinnersButtonSettings(),n=s.setPrevWinnersButtonSettings();this.renderWinnersFooter(n,t),e()})))().then((()=>{this.addEventListeners()}))}renderWinnersFooter(e,t){this.prevPage=new o.Button("Prev page",["winners__button",e]),this.nextPage=new o.Button("Next page",["winners__button",t]),this.element.append(this.prevPage.element),this.element.append(this.nextPage.element)}addEventListeners(){this.prevPage.element.addEventListener("click",(()=>{this.prevPage.element.classList.contains("disabled")||(s.setWinnersPageNumber(-1),a.refreshWinners())})),this.nextPage.element.addEventListener("click",(()=>{this.nextPage.element.classList.contains("disabled")||(s.setWinnersPageNumber(1),a.refreshWinners())}))}}t.WinnersFooter=l},681:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersTop=void 0;const r=n(664),a=n(955),s=n(583);n(148);class i extends s.BaseComponent{constructor(){super("div",["winners__top"]),this.winnersCount=new s.BaseComponent("p",["winners-count"],`Winners (${r.winnersList().length})`),this.element.append(this.winnersCount.element),this.pagesCount=new s.BaseComponent("p",["pages-count"],`Page #${a.getWinnersPageNumber()}`),this.element.append(this.pagesCount.element)}}t.WinnersTop=i},493:(e,t)=>{function n(){localStorage.setItem("garage-page-number","1")}function r(){localStorage.getItem("garage-page-number")||n();const e=localStorage.getItem("garage-page-number");if(!e)throw Error("Page number not founded");return+e}Object.defineProperty(t,"__esModule",{value:!0}),t.setPrevGarageButtonSettings=t.setNextGarageButtonSettings=t.setPageNumber=t.getPageNumber=t.setDefaultPageNumber=void 0,t.setDefaultPageNumber=n,t.getPageNumber=r,t.setPageNumber=function(e){const t=r()+e;localStorage.setItem("garage-page-number",`${t}`)},t.setNextGarageButtonSettings=function(){const e=r(),t=localStorage.getItem("garage-pages");if(!t)throw Error("Count of pages not founded");let n="disabled";return+t>1&&+t>e&&(n="active"),n},t.setPrevGarageButtonSettings=function(){const e=r(),t=localStorage.getItem("garage-pages");if(!t)throw Error("Count of pages not founded");let n="disabled";return+t>=1&&1!==e&&(n="active"),n}},664:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.winnersList=t.carsList=t.setWinnersList=t.setCarsList=void 0;const a=n(328);let s,i;t.setCarsList=function(){return r(this,void 0,void 0,(function*(){s=yield a.getAllCars()}))},t.setWinnersList=function(){return r(this,void 0,void 0,(function*(){i=yield a.getAllWinners()}))},t.carsList=function(){return s},t.winnersList=function(){return i}},704:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetAllCars=t.raceAllCars=t.resetCar=t.raceCar=void 0;const r=n(664),a=n(445),s=n(891),i=n(328);function o(){const e=document.querySelectorAll(".car__wrapper"),t=[];return e.forEach((e=>{t.push(e.id)})),t}function l(){const e=document.getElementById("reset");null==e||e.removeAttribute("disabled"),null==e||e.classList.remove("disabled")}function d(e){let t=0;e.forEach((e=>{"paused"===e.style.animationPlayState&&(t+=1)})),t===e.length&&l()}t.raceCar=function(e,t){i.startEngineOfCar(e).then((n=>{const r=+n.distance/+n.velocity/1e3;t.style.animationDuration=`${r}s`,t.classList.add("drive"),t.style.animationPlayState="running",i.driveEngineOfCar(e).catch((()=>{t.style.animationPlayState="paused"}))}))},t.resetCar=function(e,t){i.stopEngineOfCar(e).then((()=>{t.classList.remove("drive")}))},t.raceAllCars=function(){const e=document.querySelectorAll(".car");if(0===e.length)return;document.querySelectorAll("button").forEach((e=>{e.classList.contains("header__button")||e.classList.contains("winners__button")||(e.classList.add("disabled"),e.setAttribute("disabled","disabled"))}));const t=o();!function(){let e;document.querySelectorAll(".car").forEach((t=>{t.addEventListener("animationend",(()=>{e||(e=t.id,function(e){const t=r.carsList().filter((t=>String(t.id)===e))[0].name;let n="time not founded";document.querySelectorAll(".car").forEach((t=>{t.id===e&&(n=t.style.animationDuration.split("").filter((e=>"s"!==e)).join(""))}));const a=document.querySelector(".garage__message-text");a.innerText=`${t} was first (${(+n).toFixed(2)}s)`,setTimeout((()=>{a.innerText=""}),7e3)}(e),function(e){document.querySelectorAll(".car__wrapper").forEach((t=>{t.id===e&&t.classList.add("winner")}))}(e),function(e){let t="1";document.querySelectorAll(".car").forEach((n=>{n.id===e&&(t=n.style.animationDuration.split("").filter((e=>"s"!==e)).join(""))}));const n={id:e,wins:"1",time:t};i.getWinner(n.id).then((e=>{200!==e.status?i.createNewWinner(n).then((()=>s.refreshWinners())):(n.wins=e.car.wins+1,+e.car.time<+n.time&&(n.time=e.car.time),i.updateWinner(n).then((()=>s.refreshWinners())))}))}(e),l())}))}))}();const n=[];for(let e=0;e<t.length;e++)n.push(i.startEngineOfCar(t[e]));Promise.all(n).then((n=>{for(let r=0;r<n.length;r++){const a=+n[r].distance/+n[r].velocity/1e3;e[r].style.animationDuration=`${a}s`,e[r].style.animationPlayState="running",e[r].classList.add("drive"),i.driveEngineOfCar(String(t[r])).catch((()=>{e[r].style.animationPlayState="paused",d(e)}))}}))},t.resetAllCars=function(){const e=document.querySelectorAll(".car"),t=o(),n=[];for(let r=0;r<e.length;r++)n.push(i.stopEngineOfCar(t[r]));Promise.all(n).then((()=>a.renderMain("garage")))}},796:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomCar=void 0,t.randomCar=function(){const e={name:"",color:""},t=["Mersedes","Mazda","Toyota","Tesla","BMW","Audi","Skoda","Lada","Ferrari","Porsche"],n=["Land Cruiser","F-50","CX-5","Model S","SuperB","Vesta","F10","GLS","TT","E-tron"],r=Math.floor(Math.random()*t.length),a=Math.floor(Math.random()*n.length);e.name=`${t[r]} ${n[a]}`;const s=Math.floor(256*Math.random()),i=Math.floor(256*Math.random()),o=Math.floor(256*Math.random());return e.color=`#${s.toString(16)}${i.toString(16)}${o.toString(16)}`,e}},129:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.clearGarageSelectedForm=t.refreshGarage=t.renderNewGarage=void 0;const a=n(785),s=n(664);function i(){const e=document.querySelector(".garage__main-wrapper"),t=new a.Garage;null==e||e.replaceWith(t.element)}t.renderNewGarage=i,t.refreshGarage=function(){return r(this,void 0,void 0,(function*(){yield s.setCarsList().then((()=>{i()}))}))},t.clearGarageSelectedForm=function(){const e=document.querySelector(".selected-car__input"),t=document.querySelector(".selected-car-color__input");e.value="",t.value="#000000";const n=document.querySelector(".selected-car__form");if(!n)throw Error("Selected form not founded");for(let e=0;e<n.children.length;e++)n.children[e].setAttribute("disabled","");n.children[2].classList.add("disabled")}},891:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshWinners=void 0;const r=n(664),a=n(445);t.refreshWinners=function(){r.setWinnersList().then((()=>{a.renderMain("winners")}))}},445:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderMain=void 0;const r=n(743);t.renderMain=function(e){let t;"garage"===e?t=document.querySelector(".main-garage"):"winners"===e&&(t=document.querySelector(".main-winners"));const n=new r.Main(e);null==t||t.replaceWith(n.element)}},328:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))};function r(e){return`http://127.0.0.1:3000/${e}`}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteWinner=t.getAllWinners=t.updateWinner=t.createNewWinner=t.getWinner=t.driveEngineOfCar=t.stopEngineOfCar=t.startEngineOfCar=t.deleteCar=t.createCar=t.updateCar=t.getAllCars=void 0;const a={garage:r("garage"),engine:r("engine"),winners:r("winners")};t.getAllCars=function(){return n(this,void 0,void 0,(function*(){const e=yield fetch(a.garage);return yield e.json()}))},t.updateCar=function(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(`${a.garage}/${+e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,color:e.color})});return yield t.json()}))},t.createCar=function(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(`${a.garage}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()}))},t.deleteCar=function(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(`${a.garage}/${e}`,{method:"DELETE"});return yield t.json()}))},t.startEngineOfCar=function(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(`${a.engine}?id=${e}&status=started`);return yield t.json()}))},t.stopEngineOfCar=function(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(`${a.engine}?id=${e}&status=stopped`);return yield t.json()}))},t.driveEngineOfCar=function(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(`${a.engine}?id=${e}&status=drive`);return yield t.json()}))},t.getWinner=function(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(`${a.winners}/${e}`),n=yield t.json();return{status:t.status,car:n}}))},t.createNewWinner=function(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(a.winners,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:+e.id,wins:+e.wins,time:+e.time})});return yield t.json()}))},t.updateWinner=function(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(`${a.winners}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({wins:+e.wins,time:+e.time})});return yield t.json()}))},t.getAllWinners=function(){return n(this,void 0,void 0,(function*(){let e=a.winners;const t=localStorage.getItem("sort"),n=localStorage.getItem("order");""!==t&&""!==n&&(e=`${a.winners}?_sort=${t}&_order=${n}`);const r=yield fetch(e);return yield r.json()}))},t.deleteWinner=function(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(`${a.winners}/${e}`,{method:"DELETE"});return yield t.json()}))}},955:(e,t)=>{function n(){localStorage.getItem("winners-page-number")||localStorage.setItem("winners-page-number","1");const e=localStorage.getItem("winners-page-number");if(!e)throw Error("Page number not founded");return+e}Object.defineProperty(t,"__esModule",{value:!0}),t.setPrevWinnersButtonSettings=t.setNextWinnersButtonSettings=t.setWinnersPageNumber=t.getWinnersPageNumber=void 0,t.getWinnersPageNumber=n,t.setWinnersPageNumber=function(e){const t=n()+e;localStorage.setItem("winners-page-number",`${t}`)},t.setNextWinnersButtonSettings=function(){const e=n(),t=localStorage.getItem("winners-pages");if(!t)throw Error("Count of pages not founded");let r="disabled";return+t>1&&+t>e&&(r="active"),r},t.setPrevWinnersButtonSettings=function(){const e=n(),t=localStorage.getItem("winners-pages");if(!t)throw Error("Count of pages not founded");let r="disabled";return+t>=1&&1!==e&&(r="active"),r}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(387),n(503);const e=n(977),t=n(743),r=n(664);class a{constructor(n){const r=new e.Header;n.append(r.element);const a=new t.Main("garage"),s=new t.Main("winners");n.append(a.element),n.append(s.element)}}window.onload=()=>{localStorage.setItem("sort",""),localStorage.setItem("order",""),Promise.all([r.setCarsList(),r.setWinnersList()]).then((()=>{const e=document.querySelector("body");if(!e)throw Error("body not found");new a(e)}))}})()})();